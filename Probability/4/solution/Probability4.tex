%!Mode:: "TeX:UTF-8"
%!TEX TS-program = xelatex
%arara: xelatex

\documentclass{ctexart}
% \newcommand{\floor}{\lfloor #1 \rfloor}
\newif\ifpreface
\prefacetrue
\input{../../../global/all}
\begin{document}
\large
\setlength{\baselineskip}{1.2em}
\ifpreface
\input{../../../global/preface}
\newgeometry{left=2cm,right=2cm,top=2cm,bottom=2cm}
\else
\newgeometry{left=2cm,right=2cm,top=2cm,bottom=2cm}
\maketitle
\fi
%from_here_to_type
%p72 1,2,7,10
\begin{problem} \label{pro:3.6.1}
  设\(f \)的积分存在。证明：
  \(\int_{\Omega} f \d \mu = \lim_{n \to \infty} \sum_{i = - \infty}^{\infty} \frac{i}{2^n} \mu \left(\{\frac{i}{2^n} \leq f < \frac{i + 1}{2^n}\}\right) \)。
\end{problem}

\begin{solution}
  % 记\(A_{n,i}:= \{x:\frac{i}{2^n} \leq f(x) < \frac{i + 1}{2^n}\}\)。
  % 令\(g_n(x):=\frac{\floor{f(x)2^n}}{2^n}\)，则有\(g_n(x)=\frac{i}{2^n} \iff i \leq f(x)2^n < i + 1 \iff x \in A_{n,i} \)，故\(g_n(x)=\sum_{i=-\infty}^{\infty}\mathbbm{1}_{A_{n,i}}(x) \frac{i}{2^n} \)。
  % 由
  取\(\Omega=[1,\infty),\mu \)为勒贝格测度，\(f(x):=-\frac{1}{x^2} \)，则易知\(f(x) \)是可积的，故积分存在。
  但对任何\(n \)，有\(\mu(\{\frac{-1}{2^n} \leq f < \frac{0}{2^n}\})=\infty \)，于是\( \sum_{i = - \infty}^{\infty} \frac{i}{2^n} \mu \left(\{\frac{i}{2^n} \leq f < \frac{i + 1}{2^n}\}\right)=-\infty \)，
  故题设不成立。
\end{solution}

\begin{problem}\label{pro:3.6.2}
  设\(f \)为非负可测函数，令：
  \(\overline{\int}_{\Omega} f \d \mu := \inf\left\{\int_{\Omega} g \d \mu:g \geq f,g \text{为简单函数}\right\} \)。
  举例说明\(\overline{\int} \)与\(\int \)未必相同，并解释为何不将积分定义为\(\overline{\int} \)。
\end{problem}
\begin{solution}
  令\(\Omega=[1,\infty),\mu \)为勒贝格测度，令\(f(x)=\frac{1}{x^2} \)，则易知\(\int_{\Omega} f \d \mu < \infty \)。
  考查\(g \geq f \)为简单函数，令\(\varepsilon=\inf_{x \in \Omega}g(x) \)，由于\(g(x) \)值域有限，故\(\exists x \in \Omega,g(x)=\varepsilon \geq f(x)>0 \)。
  于是\(\int_{\Omega} g \d \mu \geq \int_{\Omega} \varepsilon \d \mu = \varepsilon \mu\{\Omega\}=\infty \)。故\(\overline{\int}_{\Omega} f \d \mu = \infty \neq \int_{\Omega} f \d \mu \)。

  使用\(\int \)而不是\(\overline{\int} \)的原因应该是为了保证所有黎曼可积的函数都可积。
\end{solution}

\begin{problem}\label{pro:3.6.7}
  设\(\{f_{nm}\}_{n,m \geq 1} \)为一族非负实数。证明\(\liminf_{m \to \infty} \sum_{n = 1}^{\infty}f_{nm} \geq \sum_{n = 1}^{\infty}\liminf_{m \to \infty}f_{nm} \)。
\end{problem}

\begin{solution}
  令\(\Omega=\mathbb{N}_{+},\mu \)为计数测度。记\(g_m(n):=f_{nm} \)。则\(\int_{\Omega} g_m \d \mu =\sum_{n=1}^{\infty} \mu\{n\} g_m(n)=\sum_{n=1}^{\infty}f_{nm} \)。
  由 Fatou 定理知\(\liminf_{m \to \infty} \sum_{n = 1}^{\infty}f_{nm} =\liminf_{m \to \infty} \int_{\Omega} g_m \d \mu \geq \int_{\Omega} \liminf_{m \to \infty} g_m \d \mu =\sum_{n = 1}^{\infty}\liminf_{m \to \infty}f_{nm} \)。
\end{solution}

\begin{problem}\label{pro:3.6.10}
  若\(\xi_n \)依分布收敛于\(\xi \)，则\(\mathbb{E} |\xi| \leq \liminf_{n \to \infty}\mathbb{E} |\xi_n| \)。
\end{problem}

\begin{lemma}\label{lem:1}
  若\(\xi_n \overset{d}{\to} \xi\)，则对任何有界连续函数\(g:\mathbb{R} \to \mathbb{R} \)，有\(\mathbb{E} g(\xi_n) \to \mathbb{E} g(\xi) \)。
\end{lemma}
\begin{proof}
  不妨设\(g \)非负，否则用\(g-\min g \)代替\(g \)。

  首先证明\(\forall x \in \mathbb{R},\liminf_{n}\mathbb{P}(\xi_n<x) \geq \mathbb{P}(\xi<x),\limsup_{n}\mathbb{P}(\xi_n \leq x) \leq \mathbb{P}(\xi \leq x) \)。
  记\(\xi_n,\xi \)的分布函数分别为\(F_n,F \)。由\(F \)不连续点至多可数，可取\(\varepsilon_n \searrow 0\)，使\(F \)在\(x \pm \varepsilon_n \)处连续。
  于是\(\liminf_{n}\mathbb{P}(\xi_n<x) \geq \liminf_{n}\mathbb{P}(\xi_n<x-\varepsilon_m)=\mathbb{P}(\xi<x-\varepsilon_m),\limsup_{n}\mathbb{P}(\xi_n \leq x) \leq \limsup_{n}\mathbb{P}(\xi_n<x+\varepsilon_m) = \mathbb{P}(\xi \leq x+\varepsilon_m) \)。
  令\(m \to \infty \)即得。

  故有\(\forall x<y \)，有\(\liminf_{n} \mathbb{P}(\xi_n \in (x,y)) \geq \liminf_{n}\mathbb{P}(\xi_n<y)-\limsup_{n}\mathbb{P}(\xi_n \leq x) \geq \mathbb{P}(\xi<y)-\mathbb{P}(\xi \leq x)=\mathbb{P}(\xi \in (x,y)) \)。
  对于\(\mathbb{R} \)中的开集\(O \)，熟知\(A \)可表示为可数个开区间的并，于是\(\liminf_{n}\mathbb{P}(\xi_n \in O) \geq \mathbb{P}(\xi \in O) \)。
  注意到闭集的补集是开集，于是对于\(\mathbb{R} \)中的闭集\(C \)，有\(\limsup_{n}\mathbb{P}(\xi_n \in C) \leq \mathbb{P}(\xi \in C) \)。

  接下来证明
  \begin{equation}\label{equ:2}
    \mathbb{E} X = \int_{x \geq 0} \mathbb{P}(X>x) \d x=\int_{x \geq 0} \mathbb{P}(X \geq x) \d x
  \end{equation}
  对任何非负的随机变量\(X \)成立。
  由\(\mathbbm{1}_{x<X(\omega)} \geq 0,\forall x \in \mathbb{R},\omega \in \Omega \)，
  \begin{equation} \label{equ:1}
    \begin{aligned}
      \mathbb{E} X&=\int_{\Omega} X(\omega) \d \mathbb{P}\\
      &=\int_{\Omega} \int_{0}^{\infty} \mathbbm{1}_{x < X(\omega)} \d x \d \mathbb{P}\\
      &=\int_{0}^{\infty} \int_{\Omega} \mathbbm{1}_{x < X(\omega)} \d \mathbb{P} \d x\\
      &=\int_{0}^{\infty} \mathbb{P}(X>x) \d x
    \end{aligned}
  \end{equation}。
  在\eqref{equ:1}中将\(x<X \)换为\(x \leq X \)也成立。故\eqref{equ:2}成立。

  于是
  \begin{equation}
    \begin{aligned}
      \liminf_{n}\mathbb{E} g(\xi_n)&=\liminf_{n}\int_{0}^{\infty} \mathbb{P}(g(\xi_n)>x) \d x \\
      &=\liminf_{n} \int_{0}^{\infty} \mathbb{P}(\xi_n \in \{y:g(y)>x\}) \d x \\
      &\overset{Fatou}{=} \int_{0}^{\infty} \liminf_{n} \mathbb{P}(\xi_n \in \{y:g(y)>x\}) \d x\\
      &\overset{\{y:g(y)>x\}\text{是开集}}{\geq}\int_{0}^{\infty}\mathbb{P}(\xi \in \{y:g(y)>x\}) \d x\\
      &=\mathbb{E} g(\xi)
    \end{aligned}
  \end{equation}。
  同理可得\(\limsup_{n}\mathbb{E} g(\xi_n) \leq \mathbb{E} g(\xi) \)，于是\(\lim_{n} \mathbb{E} g(\xi_n)=\mathbb{E} g(\xi) \)。
\end{proof}

\begin{solution}
  令\(g_m(x)=\min(|x|,m) \)是有界连续函数，于是由引理 \ref{lem:1}知\(\lim_{n}\mathbb{E} g_m(\xi_n)=\mathbb{E} g_m(\xi) \)。
  对任何的\(m,n \)有\(g_m(\xi_n) \leq |\xi_n| \)，于是\(\mathbb{E} g_m(\xi) \leq \liminf_{n} \mathbb{E} |\xi_n| \)。
  注意到\(g_m(\xi)\nearrow |\xi| \)，由单调收敛定理知\(\mathbb{E} |\xi| =\lim_{m} \mathbb{E} g_m(\xi) \leq \liminf_{n} \mathbb{E} |\xi_n| \)。
\end{solution}

\end{document}
