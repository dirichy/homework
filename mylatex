#bin/bash
texfilepath=$1
workdir="$(dirname $texfilepath)"
texfilename="$(basename $texfilepath)"
filename="${texfilename%.*}"
cd "$workdir"
compliter="pdflatex"
while read line; do
  if [[ $line == "%!"* ]]; then
    if [[ $line == "%!TEX TS-program = "* ]]; then
      compliter=${line#*= }
    fi
  else
    break
  fi
done < "$texfilename"
echo "Use $compliter to complite"
a="$($compliter $texfilename)"
if [ $? != 0 ] ; then
  echo "Complitation with error, please check the log."
fi
